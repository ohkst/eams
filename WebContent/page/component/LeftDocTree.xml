<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head meta_screenName="좌측 문서 트리 영역">
        <w2:type>COMPONENT</w2:type>
        <w2:buildDate/>
        <w2:MSA/>
        <xf:model>
            <w2:dataCollection baseNode="map">
            	<w2:dataList baseNode="list" repeatNode="map" id="dataList8" saveRemovedData="true">
            		<w2:columnInfo>
            			<w2:column id="col1" name="폴더" dataType="text"></w2:column>
            		</w2:columnInfo>
            		<w2:data use="true">
            			<w2:row>
            				<col1><![CDATA[BA]]></col1>
            			</w2:row>
            			<w2:row>
            				<col1><![CDATA[AA]]></col1>
            			</w2:row>
            			<w2:row>
            				<col1><![CDATA[DA]]></col1>
            			</w2:row>
            			<w2:row>
            				<col1><![CDATA[TA]]></col1>
            			</w2:row>
            		</w2:data>
            	</w2:dataList>
            </w2:dataCollection>
            <w2:workflowCollection/>
        </xf:model>
        <w2:layoutInfo/>
        <w2:publicInfo method=""/>
        <script lazy="false" type="text/javascript"><![CDATA[
scwin.onpageload = function() {
	
};

scwin.searchboxOK_onkeypress = function (e) {

    // 엔터치면 코드 적용
    if((e.charCode || e.keyCode) === 13) {
        // $p.parent().wfmRightContents.setSrc("/page/component/SystemSearchResultDetail.xml");
        dataList1.clearFilter();
        dataList3.clearFilter();
        dataList4.clearFilter();
        dataList5.clearFilter();
        dataList7.clearFilter();

        let jsonFilterOptions = {};

        jsonFilterOptions.type = "row";
        jsonFilterOptions.colIndex = "name";
        jsonFilterOptions.key = searchboxOK.getValue();
        jsonFilterOptions.exactMatch = false;
        jsonFilterOptions.condition = "and";

        dataList1.setColumnFilter(jsonFilterOptions);
        dataList3.setColumnFilter(jsonFilterOptions);
        dataList4.setColumnFilter(jsonFilterOptions);
        dataList5.setColumnFilter(jsonFilterOptions);
        dataList7.setColumnFilter(jsonFilterOptions);
        
    } else {
        // $p.log("SEARCH!!!!");

        // 검색을 구현하면 될듯
        // dataList1.clearFilter();

        // let jsonFilterOptions = {};

        // jsonFilterOptions.type = "row";
        // jsonFilterOptions.colIndex = "name";
        // jsonFilterOptions.key = searchboxOK.getValue();
        // jsonFilterOptions.exactMatch = false;
        // jsonFilterOptions.condition = "and";

        // dataList1.setColumnFilter(jsonFilterOptions);        
    }
};

scwin.searchDetail = function (rowIndex, columnIndex, columnId, type) {
    // $p.log(rowIndex + columnId + columnId);

    var cellData = "";
    if (type === 0) {
        cellData = dataList1.getCellData(rowIndex, columnId);
    } else if (type === 1){
        cellData = dataList3.getCellData(rowIndex, columnId);
    } else if (type === 2){
        cellData = dataList4.getCellData(rowIndex, columnId);
    } else if (type === 3){
        cellData = dataList5.getCellData(rowIndex, columnId);
    } else if (type === 4){
        cellData = dataList7.getCellData(rowIndex, columnId);
    }

    $p.log(cellData);

    var rowJSON = { 
        "Personal Info" : { "Name": "Lee", "Age": 50, "Married" : false},
        "Region": "Seoul",  
        "Carrier": true,
        "name": cellData
     }; 
 
     // 새로 열릴 화면에 데이터를 전달 (dataObject를 통해 전달 가능)
     var obj = { 
        "dataObject": {
            "type" : "json",
            "name" : "LeftSearch",  
            "data" : rowJSON 
         }
     };

    scwin.setContentsSrc(type, obj);
}

scwin.setContentsSrc = async function (type, obj) {
    if (type === 0) {
        await $p.parent().wfmRightContents.setSrc("/page/component/search/SystemSearchResultBizDetail.xml", obj);
    } else if (type === 1){
        await $p.parent().wfmRightContents.setSrc("/page/component/search/SystemSearchResultScreenDetail.xml", obj);
    } else if (type === 2){
        await $p.parent().wfmRightContents.setSrc("/page/component/search/SystemSearchResultTRDetail.xml", obj);
    } else if (type === 3){
        await $p.parent().wfmRightContents.setSrc("/page/component/search/SystemSearchResultDBDetail.xml", obj);
    } else if (type === 4){
        await $p.parent().wfmRightContents.setSrc("/page/component/search/SystemSearchResultMemberDetail.xml", obj);
    }
}

// 업무 검색
scwin.gridBASearchResult_oncellclick = function (rowIndex, columnIndex, columnId) {
    scwin.searchDetail(rowIndex, columnIndex, columnId, 0);
};

// 화면 검색
scwin.gridAAScreenSearchResult_oncellclick = function (rowIndex, columnIndex, columnId) {
    scwin.searchDetail(rowIndex, columnIndex, columnId, 1);
};

// TR 검색
scwin.gridAATRSearchResult_oncellclick = function (rowIndex, columnIndex, columnId) {
    scwin.searchDetail(rowIndex, columnIndex, columnId, 2);
};

// DB 검색
scwin.gridDADBSearchResult_oncellclick = function (rowIndex, columnIndex, columnId) {
    scwin.searchDetail(rowIndex, columnIndex, columnId, 3);
};

// 담당자 검색
scwin.gridMemberSearchResult_oncellclick = function (rowIndex, columnIndex, columnId) {
    scwin.searchDetail(rowIndex, columnIndex, columnId, 4);
};
]]></script>
    </head>
    <body ev:onpageload="scwin.onpageload" style=";max-width:100%;min-width:100%;">
    	<xf:group
    		style="width:100%;height: 100vh;background-color:#EFF0F4;padding: 12px;display: flex;flex-direction: column;overflow-y: auto;scrollbar-width: none;gap: 12px;box-sizing: border-box;"
    		id="">
    		<w2:button ev:onclick="scwin.btnNetwork_onclick" id="btnBA" label="BA"
    			style="width: 100%;height: 48px;font-size:18px;font-weight:bold;text-align:left;border-width:0px;">
    		</w2:button>
    		<w2:button ev:onclick="scwin.btnDB_onclick" id="btnAA" label="AA"
    			style="width: 100%;height: 48px;font-size:18px;font-weight:bold;text-align:left;border-width:0px;">
    		</w2:button>
    		<w2:button ev:onclick="scwin.btnServer_onclick" id="btnDA" label="DA"
    			style="width:100%;height:48px;font-size:18px;font-weight:bold;text-align:left;border-width:0px;">
    		</w2:button>
    		<w2:button ev:onclick="scwin.btnServer_onclick" id="btnTA" label="TA"
    			style="width:100%;height:48px;font-size:18px;font-weight:bold;text-align:left;border-width:0px;">
    		</w2:button>
    	</xf:group>
    </body>
</html>
