<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head meta_screenName="BA 산출물 리스트">
        <w2:type>COMPONENT</w2:type>
        <w2:buildDate/>
        <w2:MSA/>
        <xf:model>
        	<w2:dataCollection baseNode="map">
        		<w2:dataMap id="common">
        			<w2:keyInfo>
        				<w2:key id="guid" name="guid" dataType="text"></w2:key>
        				<w2:key id="code" name="code" dataType="text"></w2:key>
        				<w2:key id="message" name="message" dataType="text"></w2:key>
        				<w2:key id="detailMessage" name="detailMessage" dataType="text"></w2:key>
        			</w2:keyInfo>
        			<w2:data xmlns="">
        				<guid><![CDATA[c342cbf886334f33b4f3f16fd78c50e5]]></guid>
        				<code><![CDATA[N000]]></code>
        				<message><![CDATA[정상처리]]></message>
        				<detailMessage><![CDATA[]]></detailMessage>
        			</w2:data>
        		</w2:dataMap>
        		<w2:dataMap id="pageInfo">
        			<w2:keyInfo>
        				<w2:key id="offset" name="offset" dataType="text"></w2:key>
        				<w2:key id="limit" name="limit" dataType="text"></w2:key>
        				<w2:key id="type" name="type" dataType="text"></w2:key>
        				<w2:key id="sortMethod" name="sortMethod" dataType="text"></w2:key>
        				<w2:key id="total" name="total" dataType="text"></w2:key>
        			</w2:keyInfo>
        			<w2:data xmlns="">
        				<offset><![CDATA[0]]></offset>
        				<limit><![CDATA[10]]></limit>
        				<type><![CDATA[PAGE]]></type>
        				<sortMethod><![CDATA[NO]]></sortMethod>
        				<total><![CDATA[10]]></total>
        			</w2:data>
        		</w2:dataMap>
        		<w2:dataList id="unitTasks">
        			<w2:columnInfo>
                        <w2:column id="manlName" name="매뉴얼명" dataType="text"></w2:column>
        				<w2:column id="unitAfrsId" name="단위업무ID" dataType="text"></w2:column>
        				<w2:column id="unitAfrsCd" name="단위업무코드" dataType="text"></w2:column>
        				<w2:column id="depName" name="부서명" dataType="text"></w2:column>
        				<w2:column id="unitAfrsName" name="단위업무명" dataType="text"></w2:column>
        				<w2:column id="chrrNo" name="담당자사번" dataType="text"></w2:column>
        				<w2:column id="chrrName" name="담당자명" dataType="text"></w2:column>
        			</w2:columnInfo>
        			<w2:data xmlns="">
        				<w2:row>
        					<unitAfrsId><![CDATA[1]]></unitAfrsId>
        					<unitAfrsCd><![CDATA[u0QKh71yTpm3PIhv7V]]></unitAfrsCd>
        					<depName><![CDATA[인사부]]></depName>
        					<unitAfrsName><![CDATA[string]]></unitAfrsName>
        					<chrrNo><![CDATA[113565]]></chrrNo>
        					<chrrName><![CDATA[최동규]]></chrrName>
        					<manlName><![CDATA[계좌계설가이드]]></manlName>
        				</w2:row>
        			</w2:data>
        		</w2:dataList>
        	</w2:dataCollection>
        	<w2:workflowCollection />
        	<xf:submission id="sbmUnitTaskList" action="ba/query/api/v1/unit-task-list" method="get" mediatype="application/json" ref=""
        		target='data:json,["common","pageInfo","unitTasks"]' encoding="UTF-8" instance="" replace="" errorHandler="" customHandler=""
        		mode="asynchronous" processMsg="" ev:submit="" ev:submitdone="scwin.sbmUnitTaskList_submitdone" ev:submiterror=""
        		abortTrigger="">
        	</xf:submission>
        </xf:model>
        <w2:layoutInfo/>
        <w2:publicInfo method=""/>
        <script lazy="false" type="text/javascript"><![CDATA[
scwin.onpageload = function() {
    // const param = {
    //     offset: 0,
    //     limit: 100,
    //     type: "PAGE",
    //     sortMethod: "NO",
    //     searchMethods: ["CONTAINS"],
    //     sortFields: ["prdtnSysDvsn"],
    //     searchFields: ["prdtnSysDvsn"],
    //     searchContent: "B"
    // };

    // $c.sbm.execute(sbmBADocList, param);

    $c.sbm.execute(sbmUnitTaskList);
};

scwin.btnSearch_onclick = function (e) {
    unitTasks.clearFilter();

    let jsonFilterOptions = {};

    jsonFilterOptions.type = "row";
    jsonFilterOptions.colIndex = "manlName";
    jsonFilterOptions.key = tfBizName.getValue();
    jsonFilterOptions.exactMatch = false;
    jsonFilterOptions.condition = "and";

    unitTasks.setColumnFilter(jsonFilterOptions);

    let jsonFilterOptions2 = {};

    jsonFilterOptions2.type = "row";
    jsonFilterOptions2.colIndex = "chrrName";
    jsonFilterOptions2.key = tfOwnerName.getValue();
    jsonFilterOptions2.exactMatch = false;
    jsonFilterOptions2.condition = "and";

    unitTasks.setColumnFilter(jsonFilterOptions2);
};

scwin.btnReset_onclick = function (e) {
    tfBizName.setValue("");
    tfOwnerName.setValue("");
    unitTasks.clearFilter();
};

scwin.imgBtnCSV_onclick = function (e) {
    var jsnOptions;
    var today = $c.date.getServerDateTime("yyyyMMddHHmmss");
    jsnOptions = {
        fileName: "TestCSV" + today + ".csv"
    };

    grdSystemList.saveCSV(jsnOptions);
};

scwin.grdSystemList_oncellclick = function (rowIndex, columnIndex, columnId) {
    var rowJSON = {
        "id": unitTasks.getCellData(rowIndex, "unitAfrsId"),
        "type": "BA"
    };

    var dataObject = {
        "type": "json",
        "name": "PopupData",
        "data": rowJSON
    };

    $c.util.openEamsPopup("/page/component/document/PopupDetailDocList.xml", "문서 리스트", dataObject);
};

scwin.closeAction = function (id, info) {

    if (!info.isCloseButtonClick) {
        return true;
    }

    return true
};
scwin.sbmUnitTaskList_submitdone = function (e) {
    
};
]]></script>
    </head>
    <body ev:onpageload="scwin.onpageload" style="">
    	<xf:group style="" id="" class="sub_contents flex_cont">
    		<xf:group id="" class="pgtbox">
    			<w2:textbox style="" id="" label="BA 산출물 리스트" class="pgt_tit"></w2:textbox>
    		</xf:group>
    		<xf:group class="schbox" id="" meta_snippetCategory="03_조회영역" meta_snippetKeyComponent="true" meta_snippetName="3_01 조회조건1행"
    			style="">
    			<xf:group class="schbox_inner" id="" style="">
    				<xf:group adaptive="layout" adaptiveThreshold="768" class="w2tb tbl " id="" style="" tagname="table">
    					<w2:attributes>
    						<w2:summary></w2:summary>
    					</w2:attributes>
    					<xf:group tagname="colgroup">
    						<xf:group style="width:100px;" tagname="col"></xf:group>
    						<xf:group style="" tagname="col"></xf:group>
    						<xf:group style="width:100px;" tagname="col"></xf:group>
    						<xf:group style="" tagname="col"></xf:group>
    					</xf:group>
    					<xf:group class="" id="" style="" tagname="tr">
    						<xf:group class="w2tb_th" style="" tagname="th">
    							<w2:textbox id="" label="매뉴얼명" style=""></w2:textbox>
    						</xf:group>
    						<xf:group class="w2tb_td" style="" tagname="td">
    							<xf:input id="tfBizName" style="width:100%;"></xf:input>
    						</xf:group>
    						<xf:group class="w2tb_th" style="" tagname="th">
    							<w2:textbox id="" label="담당자명" style=""></w2:textbox>
    						</xf:group>
    						<xf:group class="w2tb_td" id="" style="" tagname="td">
    							<xf:input id="tfOwnerName" style="width:100%;"></xf:input>
    						</xf:group>
    					</xf:group>
    				</xf:group>
    			</xf:group>
    			<xf:group class="btn_schbox" id="" style="">
    				<w2:button ev:onclick="scwin.btnSearch_onclick" id="btnSearch" label="조회" style="" class="btn_cm sch"></w2:button>
    				<w2:button ev:onclick="scwin.btnReset_onclick" id="btnReset" label="초기화"
    					style="" class="btn_cm refresh">
    				</w2:button>
    			</xf:group>
    		</xf:group>
    		<xf:group id="" class="titbox"><xf:group style="" id="" class="rt">
    			<w2:button ev:onclick="scwin.imgBtnCSV_onclick" style="" id="imgBtnCSV" label="CSV 다운로드" class="btn_cm download"></w2:button>
    		</xf:group></xf:group>
    		<xf:group id="" class="gvwbox grp_flex">
    			<w2:gridView useFilterSearch="false" ev:oncellclick="scwin.grdSystemList_oncellclick" checkAllType="false"
    				dataList="data:unitTasks" style="width: 100%;height: 150px;" id="grdSystemList" autoFit="allColumn" useFilterList="true"
    				sortable="true" class="gvw">
    				<w2:caption style="" id="caption1" value="this is a grid caption."></w2:caption>
    				<w2:header style="" id="header1">
    					<w2:row style="" id="row1">
    						<w2:column hidden="false" width="70" inputType="text" style="" id="column1" value="매뉴얼명" displayMode="label">
    						</w2:column>
    						<w2:column hidden="false" width="70" inputType="text" style="" id="column7" value="단위업무ID"
    							displayMode="label">
    						</w2:column>
    						<w2:column hidden="false" width="70" inputType="text" style="" id="column6" value="단위업무코드"
    							displayMode="label">
    						</w2:column>
    						<w2:column hidden="false" width="70" inputType="text" style="" id="column5" value="부서명" displayMode="label">
    						</w2:column>
    						<w2:column hidden="false" width="70" inputType="text" style="" id="column4" value="단위업무명" displayMode="label">
    						</w2:column>
    						<w2:column hidden="false" width="70" inputType="text" style="" id="column3" value="담당자사번" displayMode="label">
    						</w2:column>
    						<w2:column hidden="false" width="70" inputType="text" style="" id="column2" value="담당자명" displayMode="label">
    						</w2:column>
    					</w2:row>
    				</w2:header>
    				<w2:gBody style="" id="gBody1">
    					<w2:row style="" id="row2">
    						<w2:column width="70" inputType="text" style="" id="manlName" value="" displayMode="label"></w2:column>
    						<w2:column width="70" inputType="text" style="" id="unitAfrsId" value="" displayMode="label"></w2:column>
    						<w2:column width="70" inputType="text" style="" id="unitAfrsCd" value="" displayMode="label"></w2:column>
    						<w2:column width="70" inputType="text" style="" id="depName" value="" displayMode="label"></w2:column>
    						<w2:column width="70" inputType="text" style="" id="unitAfrsName" value="" displayMode="label"></w2:column>
    						<w2:column width="70" inputType="text" style="" id="chrrNo" value="" displayMode="label"></w2:column>
    						<w2:column width="70" inputType="text" style="" id="chrrName" value="" displayMode="label"></w2:column>
    					</w2:row>
    				</w2:gBody>
    			</w2:gridView>
    		</xf:group>
    	</xf:group>
    </body>
</html>
